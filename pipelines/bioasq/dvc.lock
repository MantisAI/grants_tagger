schema: '2.0'
stages:
  download:
    cmd: python ../../scripts/download_bioasq_test_data.py 9 ../../data/processed/bioasq/data_9.json
    deps:
    - path: ../../scripts/download_bioasq_test_data.py
      md5: dd7b13b49437977d68fee317acf4499d
      size: 528
    outs:
    - path: ../../data/processed/bioasq/data_9.json
      md5: 365c76e862122df3185bda51ae182b81
      size: 5711572
  tag:
    cmd: python ../../scripts/tag_bioasq_test_data.py ../../data/processed/bioasq/data_3.json
      ../../models/xlinear/model/ ../../models/xlinear/label_binarizer.pkl ../../data/raw/desc2021.xml
      ../../data/processed/bioasq/tagged_data_3_xlinear.json --approach mesh-xlinear
    deps:
    - path: ../../data/processed/bioasq/data_3.json
      md5: ec91b529f6e8464255603001bed995c4
      size: 7694765
    - path: ../../data/raw/desc2021.xml
      md5: 8663a7dd8e1895dd22525d42b80cd2df
      size: 300410104
    - path: ../../models/xlinear/label_binarizer.pkl
      md5: 67d759ed4142feab2e575dc9bd3d5f54
      size: 827793
    - path: ../../models/xlinear/model/
      md5: 072d18f207a503c632e0ce7f363da070.dir
      size: 3740297256
      nfiles: 33
    - path: ../../scripts/tag_bioasq_test_data.py
      md5: fe0d5e489c45101738e5a62935837d9f
      size: 1383
    outs:
    - path: ../../data/processed/bioasq/tagged_data_3_xlinear.json
      md5: 4684b1bc9161d2035847a3d7519bf35e
      size: 504262
  tag@1:
    cmd: python ../../scripts/tag_bioasq_test_data.py ../../data/processed/bioasq/data_9.json
      ../../models/bertmesh/model.pt ../../models/bertmesh/label_binarizer.pkl ../../data/raw/desc2021.xml
      ../../data/processed/bioasq/tagged_data_9_bertmesh.json --approach bertmesh
      --threshold 0.5
    deps:
    - path: ../../data/processed/bioasq/data_9.json
      md5: 365c76e862122df3185bda51ae182b81
      size: 5711572
    - path: ../../data/raw/desc2021.xml
      md5: 8663a7dd8e1895dd22525d42b80cd2df
      size: 300410104
    - path: ../../models/bertmesh/label_binarizer.pkl
      md5: fc776931bd177c10b7831c05a9684a8b
      size: 1038486
    - path: ../../models/bertmesh/model.pt
      md5: bb0216f0665ee2210aab1710daae48aa
      size: 647482273
    - path: ../../scripts/tag_bioasq_test_data.py
      md5: fe0d5e489c45101738e5a62935837d9f
      size: 1383
    outs:
    - path: ../../data/processed/bioasq/tagged_data_9_bertmesh.json
      md5: fb8e5ea9938efe0cbe0825736ed6b320
      size: 474248
  submit@1:
    cmd: python ../../scripts/submit_bioasq_test_results.py 9 ../../data/processed/bioasq/tagged_data_9_bertmesh.json
      Wellcome-BertMesh
    deps:
    - path: ../../data/processed/bioasq/tagged_data_9_bertmesh.json
      md5: fb8e5ea9938efe0cbe0825736ed6b320
      size: 474248
    - path: ../../scripts/submit_bioasq_test_results.py
      md5: 81867d741804db4c1bbd6a70188b9817
      size: 724
  tag@0:
    cmd: python ../../scripts/tag_bioasq_test_data.py ../../data/processed/bioasq/data_9.json
      ../../models/xlinear/model/ ../../models/xlinear/label_binarizer.pkl ../../data/raw/desc2021.xml
      ../../data/processed/bioasq/tagged_data_9_xlinear.json --approach mesh-xlinear
      --threshold 0.2
    deps:
    - path: ../../data/processed/bioasq/data_9.json
      md5: 365c76e862122df3185bda51ae182b81
      size: 5711572
    - path: ../../data/raw/desc2021.xml
      md5: 8663a7dd8e1895dd22525d42b80cd2df
      size: 300410104
    - path: ../../models/xlinear/label_binarizer.pkl
      md5: 67d759ed4142feab2e575dc9bd3d5f54
      size: 827793
    - path: ../../models/xlinear/model/
      md5: 3db5df52b0ccea42837830b0578f99a8.dir
      size: 6753545796
      nfiles: 38
    - path: ../../scripts/tag_bioasq_test_data.py
      md5: 84a11a39cf4fc5e52fb7051a36edc0f0
      size: 1389
    outs:
    - path: ../../data/processed/bioasq/tagged_data_9_xlinear.json
      md5: 99ecbe5fdd215b38b0cba445d038a460
      size: 16808
  submit@0:
    cmd: python ../../scripts/submit_bioasq_test_results.py 9 ../../data/processed/bioasq/tagged_data_9_xlinear.json
      Wellcome-XLinear
    deps:
    - path: ../../data/processed/bioasq/tagged_data_9_xlinear.json
      md5: 99ecbe5fdd215b38b0cba445d038a460
      size: 16808
    - path: ../../scripts/submit_bioasq_test_results.py
      md5: 81867d741804db4c1bbd6a70188b9817
      size: 724
