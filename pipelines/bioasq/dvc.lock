schema: '2.0'
stages:
  download:
    cmd: python ../../scripts/download_bioasq_test_data.py 10 ../../data/processed/bioasq/data_10.json
    deps:
    - path: ../../scripts/download_bioasq_test_data.py
      md5: dd7b13b49437977d68fee317acf4499d
      size: 528
    outs:
    - path: ../../data/processed/bioasq/data_10.json
      md5: c2cd9f241b748ec5e93cb6d62f798b36
      size: 5479797
  tag:
    cmd: python ../../scripts/tag_bioasq_test_data.py ../../data/processed/bioasq/data_3.json
      ../../models/xlinear/model/ ../../models/xlinear/label_binarizer.pkl ../../data/raw/desc2021.xml
      ../../data/processed/bioasq/tagged_data_3_xlinear.json --approach mesh-xlinear
    deps:
    - path: ../../data/processed/bioasq/data_3.json
      md5: ec91b529f6e8464255603001bed995c4
      size: 7694765
    - path: ../../data/raw/desc2021.xml
      md5: 8663a7dd8e1895dd22525d42b80cd2df
      size: 300410104
    - path: ../../models/xlinear/label_binarizer.pkl
      md5: 67d759ed4142feab2e575dc9bd3d5f54
      size: 827793
    - path: ../../models/xlinear/model/
      md5: 072d18f207a503c632e0ce7f363da070.dir
      size: 3740297256
      nfiles: 33
    - path: ../../scripts/tag_bioasq_test_data.py
      md5: fe0d5e489c45101738e5a62935837d9f
      size: 1383
    outs:
    - path: ../../data/processed/bioasq/tagged_data_3_xlinear.json
      md5: 4684b1bc9161d2035847a3d7519bf35e
      size: 504262
  tag@1:
    cmd: python ../../scripts/tag_bioasq_test_data.py ../../data/processed/bioasq/data_10.json
      ../../models/bertmesh/model.pt ../../models/bertmesh/label_binarizer.pkl ../../data/raw/desc2021.xml
      ../../data/processed/bioasq/tagged_data_10_bertmesh.json --approach bertmesh
      --threshold 0.5
    deps:
    - path: ../../data/processed/bioasq/data_10.json
      md5: c2cd9f241b748ec5e93cb6d62f798b36
      size: 5479797
    - path: ../../data/raw/desc2021.xml
      md5: 8663a7dd8e1895dd22525d42b80cd2df
      size: 300410104
    - path: ../../models/bertmesh/label_binarizer.pkl
      md5: fc776931bd177c10b7831c05a9684a8b
      size: 1038486
    - path: ../../models/bertmesh/model.pt
      md5: bb0216f0665ee2210aab1710daae48aa
      size: 647482273
    - path: ../../scripts/tag_bioasq_test_data.py
      md5: fe0d5e489c45101738e5a62935837d9f
      size: 1383
    outs:
    - path: ../../data/processed/bioasq/tagged_data_10_bertmesh.json
      md5: 8adcee49cb65c000800b23c3b98ac0c3
      size: 465139
  submit@1:
    cmd: python ../../scripts/submit_bioasq_test_results.py 10 ../../data/processed/bioasq/tagged_data_10_bertmesh.json
      Wellcome-BertMesh
    deps:
    - path: ../../data/processed/bioasq/tagged_data_10_bertmesh.json
      md5: 8adcee49cb65c000800b23c3b98ac0c3
      size: 465139
    - path: ../../scripts/submit_bioasq_test_results.py
      md5: 81867d741804db4c1bbd6a70188b9817
      size: 724
  tag@0:
    cmd: python ../../scripts/tag_bioasq_test_data.py ../../data/processed/bioasq/data_10.json
      ../../models/xlinear/model/ ../../models/xlinear/label_binarizer.pkl ../../data/raw/desc2021.xml
      ../../data/processed/bioasq/tagged_data_10_xlinear.json --approach mesh-xlinear
      --threshold 0.2
    deps:
    - path: ../../data/processed/bioasq/data_10.json
      md5: c2cd9f241b748ec5e93cb6d62f798b36
      size: 5479797
    - path: ../../data/raw/desc2021.xml
      md5: 8663a7dd8e1895dd22525d42b80cd2df
      size: 300410104
    - path: ../../models/xlinear/label_binarizer.pkl
      md5: 67d759ed4142feab2e575dc9bd3d5f54
      size: 827793
    - path: ../../models/xlinear/model/
      md5: 8cfb6bb1bbb49443f37208e11c1670e6.dir
      size: 3740297256
      nfiles: 33
    - path: ../../scripts/tag_bioasq_test_data.py
      md5: fe0d5e489c45101738e5a62935837d9f
      size: 1383
    outs:
    - path: ../../data/processed/bioasq/tagged_data_10_xlinear.json
      md5: 99f9b4f24144edb06b81ad85220d4018
      size: 483730
  submit@0:
    cmd: python ../../scripts/submit_bioasq_test_results.py 10 ../../data/processed/bioasq/tagged_data_10_xlinear.json
      Wellcome-XLinear
    deps:
    - path: ../../data/processed/bioasq/tagged_data_10_xlinear.json
      md5: 99f9b4f24144edb06b81ad85220d4018
      size: 483730
    - path: ../../scripts/submit_bioasq_test_results.py
      md5: 81867d741804db4c1bbd6a70188b9817
      size: 724
